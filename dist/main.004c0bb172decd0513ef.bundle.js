(()=>{"use strict";var e,t={695:(e,t,s)=>{var i=s(260),n=s.n(i);class a{}a.NINE=0,a.TEN=1,a.J=2,a.Q=3,a.K=4,a.A=5,a.M6=6,a.M5=7,a.M4=8,a.M3=9,a.M2=10,a.M1=11,a.H6=12,a.H5=13,a.H4=14,a.H3=15,a.H2=16,a.H1=17,a.REEL_SYM_LENGTH=[20,22,24,26,28],a.REEL_GAP=5,a.SYM_WIDTH=200,a.SYM_HEIGHT=200,a.REEL_X=450,a.REEL_Y=200,a.VISIBLE_SYMBOL_COUNT=3,a.SWING_OFF_COUNT=1,a.NO_OF_REELS=5,a.SPIN_BTN_X=1600,a.SPIN_BTN_Y=600,a.PRELOAD_SCENE="PreloadScene",a.BASEGAME_SCENE="BaseGameScene",a.EVT_REEL_SPIN_COMPLETE="reelSpinFinished",a.EVT_SINGLE_REEL_STOP="reelStop",a.EVT_WIN_PRES_FINISH="winAnimFinish";class h{}h.WINS=[],h.PAYOUT={x2:[10,10,10,10,10,10,20,20,20,20,20,20,30,30,30,30,30,30],x3:[20,20,20,20,20,20,30,30,30,30,30,30,40,40,40,40,40,40],x4:[30,30,30,30,30,30,40,40,40,40,40,40,50,50,50,50,50,50],x5:[40,40,40,40,40,40,50,50,50,50,50,50,60,60,60,60,60,60]},h.CHEAT_ON=!1,h.CHEAT_REEL_SET=[[15,10,5,3,12,17,7,1,10,10,16,0,4,11,9,2,8,3,6,8],[10,9,17,10,1,16,0,0,8,3,6,5,0,11,0,1,14,8,14,5,0,7],[1,7,14,4,14,7,13,11,15,4,10,17,13,4,17,12,0,12,2,15,10,17,8,0],[13,17,15,12,5,3,7,6,14,11,0,9,15,9,17,1,4,4,4,11,11,7,7,5,8,3],[0,17,14,16,5,10,0,8,3,5,10,6,2,5,6,6,17,2,3,2,3,15,17,4,15,11,4,6]],h.CHEAT_STOP_IDX=[9,5,10,13,3];class l{constructor(e,t,s,i,n){this._reels=[],this._scene=e;let h=e.add.graphics();h.fillRect(t-a.SYM_WIDTH/2,s+a.SYM_HEIGHT/2,i,n);let l=h.createGeometryMask();this._view=e.add.container(t,s),this._view.setMask(l)}addReels(e){this._view.add(e.view),this._reels.push(e)}setSymbols(e){for(let t in this._reels)this._reels[t].availableSymbols=e}setInitReels(e){for(let t in this._reels)this._reels[t].reelStrip=e[t],this._reels[t].setInitResult()}setStopIdx(e){for(let t in this._reels)this._reels[t].stopPosition=e[t]}startReels(){for(let e in this._reels)this._reels[e].currentState=this._reels[0].SPIN_STATE,this._reels[e].startReel(),this._reels[e].reelStopEvent.once(a.EVT_SINGLE_REEL_STOP,this.onReelStop,this);this._reels[0].currentState=this._reels[0].STOPPING_STATE}onReelStop(e){this._reels[e].currentState=this._reels[e].IDLE_STATE,e===this._reels.length-1?this.onAllReelsStop():this._reels[e+1].currentState=this._reels[e+1].STOPPING_STATE}onAllReelsStop(){this._scene.mainEvents.emit(a.EVT_REEL_SPIN_COMPLETE)}getReel(e){return this._reels[e]}get view(){return this._view}}class o{constructor(e,t,s,i,n,a,h){this._availableSymbols=[],this._stopPosition=-1,this._currIdx=0,this._reelStrip=[],this._currentState="idle",this.SPIN_STATE="spin",this.STOPPING_STATE="stopping",this.IDLE_STATE="idle",this._speed=2.5,this.scene=e,this._id=t,this._view=e.add.container(),this._visibleCount=n,this._symHeight=h,this.createReel(s,i,a,h),this.reelStopEvent=new Phaser.Events.EventEmitter}createReel(e,t,s,i){this._view.x=e,this._view.y=t}setInitResult(){this.clearReels();let e=this._visibleCount+a.SWING_OFF_COUNT;for(let t=0;t<e;t++)this._view.add(this._availableSymbols[this._reelStrip[t]].createReelAnim(0,(e-t)*this._symHeight));this._view.y=-(e-this._visibleCount)*this._symHeight}set stopPosition(e){this._stopPosition=e}clearReels(){this._view.removeAll(!0)}startReel(){let e=Math.abs(this._view.y*(1/this._speed)),t=this.scene.tweens.add({targets:this._view,y:0,duration:e,repeat:Number.POSITIVE_INFINITY,onRepeat:()=>{this._currentState!==this.STOPPING_STATE||this._stopPosition!==this._currIdx?this.updateReelView():t.complete()},onComplete:()=>{this.updateReelView(),this.reelStopEvent.emit(a.EVT_SINGLE_REEL_STOP,this._id)}})}updateReelView(){var e;null===(e=this.view.list.shift())||void 0===e||e.destroy(),this.view.y=-this._symHeight,this._view.add(this._availableSymbols[this._reelStrip[this._currIdx]].createReelAnim(0,0)),this._currIdx=this._currIdx>=this._reelStrip.length-1?0:this._currIdx+1;for(let e of this._view.list)e.y+=this._symHeight}getSymbolAtRow(e){return this.view.list[a.VISIBLE_SYMBOL_COUNT-a.SWING_OFF_COUNT-e]}set reelStrip(e){this._reelStrip=e}set availableSymbols(e){this._availableSymbols=e}get availableSymbols(){return this._availableSymbols}get view(){return this._view}set currentState(e){this._currentState=e}get currentState(){return this._currentState}}class r{static generateReelData(e=!1){if(e)return h.CHEAT_REEL_SET;let t=[];h.WINS=[];for(let e=0;e<a.REEL_SYM_LENGTH.length;e++){let s=[];for(let t=0;t<a.REEL_SYM_LENGTH[e];t++)s.push(this.getRandomInt(a.H1));t.push(s)}return t}static generateStopPositions(e=!1){if(e)return h.CHEAT_STOP_IDX;let t=[];h.WINS=[];for(let e=0;e<a.REEL_SYM_LENGTH.length;e++)t.push(this.getRandomInt(a.REEL_SYM_LENGTH[e]-1));return t}static getRandomInt(e){return Math.floor(Math.random()*Math.floor(e+1))}static searchWinSequence(e,t){let s=[];h.WINS=[];for(let i=0;i<e.length;i++){let n=[],a=t[i];isNaN(e[i][a-1])?(n.push(e[i][e[i].length-1]),n.push(e[i][e[i].length-2]),n.push(e[i][e[i].length-3]),s.push(n)):(n.push(e[i][a-1]),isNaN(e[i][a-2])?(n.push(e[i][e[i].length-1]),n.push(e[i][e[i].length-2]),s.push(n)):(n.push(e[i][a-2]),isNaN(e[i][a-3])?n.push(e[i][e[i].length-1]):n.push(e[i][a-3]),s.push(n)))}for(let e=0;e<s[0].length;e++){let t=s[0][e],i={winSym:t,winSymCount:1,pos:[{x:0,y:e}]};for(let e=1;e<s.length;e++){let n=1;for(let h=0;h<s[e].length;h++)if(t===s[e][h]&&(n++,i.pos.push({x:e,y:h}),n>=a.NO_OF_REELS)){i.winSymCount=n;break}if(!(n>i.winSymCount))break;i.winSymCount=n}i.winSymCount>1&&h.WINS.push(i)}}}class _{constructor(e){this._gameScene=e,this._view=e.add.container(),this._winText=this.createTextFeild()}createTextFeild(){return this._gameScene.add.text(800,950,"",{font:"bold 50px Arial",fill:"#fff",boundsAlignH:"center",boundsAlignV:"middle"})}start(){this._winIdx=0,this.animateLine()}animateLine(){this._winIdx<h.WINS.length?(this.setSymAnim(),this.updateWinText(!0),this._timer=this._gameScene.time.addEvent({delay:1e3,callback:this.onLineAnimationFinished,callbackScope:this,loop:!1})):(this.updateWinText(!1),this._gameScene.mainEvents.emit(a.EVT_WIN_PRES_FINISH))}updateWinText(e){e?(this._winSymImage&&this._winSymImage.destroy(),this._winSymImage=this._gameScene.reelContainer.getReel(0).availableSymbols[h.WINS[this._winIdx].winSym].createReelAnim(750,980),this._winSymImage.setScale(.3),this._view.add(this._winSymImage),this._winText.text=" x  "+h.WINS[this._winIdx].winSymCount+"  =  "+h.PAYOUT["x"+h.WINS[this._winIdx].winSymCount][h.WINS[this._winIdx].winSym]):(this._winText.text="",this._winSymImage&&this._winSymImage.destroy())}onLineAnimationFinished(){this._timer.remove(!1),this.stopAnim(),this._winIdx++,this.animateLine()}setSymAnim(){let e=h.WINS[this._winIdx];for(let t of h.WINS[this._winIdx].pos){let s=this._gameScene.reelContainer.getReel(t.x).availableSymbols[e.winSym].createWinAnim(a.REEL_X+(a.SYM_WIDTH+a.REEL_GAP)*t.x,a.REEL_Y+a.SYM_HEIGHT*(t.y+1));this._view.add(s)}}stopAnim(){}}class m{constructor(e,t,s,i){this.id=t,this.scene=e,this.reelAnim=s,this.winAnim=i}createReelAnim(e,t){return this.scene.add.image(e,t,this.reelAnim)}createWinAnim(e,t){let s=this.scene.add.image(e,t,this.winAnim);return this.scene.tweens.add({targets:s,alpha:0,duration:500,yoyo:!0,onComplete:()=>{s.destroy()}}),s}}class c extends Phaser.Scene{constructor(){super({key:a.BASEGAME_SCENE}),this._reelData=[]}create(){this.reelContainer=this.createReelContainer(),this.winAnimation=new _(this);let e=this.createGameSymbol();this.reelContainer.setSymbols(e),this.reelContainer.setInitReels(this._reelData=r.generateReelData(h.CHEAT_ON)),this.startBtn=this.createBtn(),this._mainEvents=new Phaser.Events.EventEmitter,this.enableStartBtn()}startReels(){this.disableStartBtn();let e=r.generateStopPositions(h.CHEAT_ON);this.reelContainer.setStopIdx(e),r.searchWinSequence(this._reelData,e),this.reelContainer.startReels(),this._mainEvents.once(a.EVT_REEL_SPIN_COMPLETE,this.onReelSpinFinish,this)}createBtn(){let e=this.add.image(a.SPIN_BTN_X,a.SPIN_BTN_Y,"btn").setInteractive();return e.scale=2,e}createGameSymbol(){let e=[];return e.push(new m(this,a.NINE,"sym9","sym9_connect")),e.push(new m(this,a.TEN,"sym10","sym10_connect")),e.push(new m(this,a.J,"symJ","symJ_connect")),e.push(new m(this,a.Q,"symQ","symQ_connect")),e.push(new m(this,a.K,"symK","symK_connect")),e.push(new m(this,a.A,"symA","symA_connect")),e.push(new m(this,a.M6,"symM6","symM6_connect")),e.push(new m(this,a.M5,"symM5","symM5_connect")),e.push(new m(this,a.M4,"symM4","symM4_connect")),e.push(new m(this,a.M3,"symM3","symM3_connect")),e.push(new m(this,a.M2,"symM2","symM2_connect")),e.push(new m(this,a.M1,"symM1","symM1_connect")),e.push(new m(this,a.H6,"symH6","symH6_connect")),e.push(new m(this,a.H5,"symH5","symH5_connect")),e.push(new m(this,a.H4,"symH4","symH4_connect")),e.push(new m(this,a.H3,"symH3","symH3_connect")),e.push(new m(this,a.H2,"symH2","symH2_connect")),e.push(new m(this,a.H1,"symH1","symH1_connect")),e}createReelContainer(){let e=new l(this,a.REEL_X,a.REEL_Y,a.NO_OF_REELS*(a.SYM_WIDTH+a.REEL_GAP),3*a.SYM_HEIGHT);for(let t=0;t<a.NO_OF_REELS;t++)e.addReels(new o(this,t,t*(a.SYM_WIDTH+a.REEL_GAP),0,a.VISIBLE_SYMBOL_COUNT,a.SYM_WIDTH,a.SYM_HEIGHT));return e}onReelSpinFinish(){this.startWinPresentation()}startWinPresentation(){this._mainEvents.once(a.EVT_WIN_PRES_FINISH,this.enableStartBtn,this),this.winAnimation.start()}enableStartBtn(){this.startBtn.alpha=1,this.startBtn.once("pointerup",this.startReels,this)}disableStartBtn(){this.startBtn.alpha=.3}get mainEvents(){return this._mainEvents}}class S extends Phaser.Scene{constructor(){super({key:a.PRELOAD_SCENE})}preload(){this.preloadDesktop()}create(){this.scene.start(a.BASEGAME_SCENE)}preloadDesktop(){this.load.image("btn","assets/btn/btn.png"),this.load.image("sym9","assets/symbols/9.png"),this.load.image("sym10","assets/symbols/10.png"),this.load.image("symA","assets/symbols/A.png"),this.load.image("symH1","assets/symbols/H1.png"),this.load.image("symH2","assets/symbols/H2.png"),this.load.image("symH3","assets/symbols/H3.png"),this.load.image("symH4","assets/symbols/H4.png"),this.load.image("symH5","assets/symbols/H5.png"),this.load.image("symH6","assets/symbols/H6.png"),this.load.image("symJ","assets/symbols/J.png"),this.load.image("symK","assets/symbols/K.png"),this.load.image("symM1","assets/symbols/M1.png"),this.load.image("symM2","assets/symbols/M2.png"),this.load.image("symM3","assets/symbols/M3.png"),this.load.image("symM4","assets/symbols/M4.png"),this.load.image("symM5","assets/symbols/M5.png"),this.load.image("symM6","assets/symbols/M6.png"),this.load.image("symQ","assets/symbols/Q.png"),this.load.image("sym9_connect","assets/symbols/9_connect.png"),this.load.image("sym10_connect","assets/symbols/10_connect.png"),this.load.image("symA_connect","assets/symbols/A_connect.png"),this.load.image("symH1_connect","assets/symbols/H1_connect.png"),this.load.image("symH2_connect","assets/symbols/H2_connect.png"),this.load.image("symH3_connect","assets/symbols/H3_connect.png"),this.load.image("symH4_connect","assets/symbols/H4_connect.png"),this.load.image("symH5_connect","assets/symbols/H5_connect.png"),this.load.image("symH6_connect","assets/symbols/H6_connect.png"),this.load.image("symJ_connect","assets/symbols/J_connect.png"),this.load.image("symK_connect","assets/symbols/K_connect.png"),this.load.image("symM1_connect","assets/symbols/M1_connect.png"),this.load.image("symM2_connect","assets/symbols/M2_connect.png"),this.load.image("symM3_connect","assets/symbols/M3_connect.png"),this.load.image("symM4_connect","assets/symbols/M4_connect.png"),this.load.image("symM5_connect","assets/symbols/M5_connect.png"),this.load.image("symM6_connect","assets/symbols/M6_connect.png"),this.load.image("symQ_connect","assets/symbols/Q_connect.png")}}new class{constructor(){this.DEFAULT_WIDTH=1920,this.DEFAULT_HEIGHT=1080,this.MAX_WIDTH=2048,this.MAX_HEIGHT=1152,this.SCALE_MODE="SMOOTH",this.init(),window.addEventListener("resize",(e=>{this.resize()})),this.resize()}init(){const e={parent:"phaser-game",backgroundColor:"#71bee7",width:this.DEFAULT_WIDTH,height:this.DEFAULT_HEIGHT,scale:{mode:n().Scale.NONE,width:this.DEFAULT_WIDTH,height:this.DEFAULT_HEIGHT},scene:[S,c]};this.game=new(n().Game)(e)}resize(e){const t=window.innerWidth,s=window.innerHeight;let i=this.DEFAULT_WIDTH,n=this.DEFAULT_HEIGHT,a=this.MAX_WIDTH,h=this.MAX_HEIGHT,l=this.SCALE_MODE,o=Math.min(t/i,s/n),r=Math.min(t/o,a),_=Math.min(s/o,h),m=this.DEFAULT_WIDTH/this.DEFAULT_HEIGHT,c=this.MAX_WIDTH/this.DEFAULT_HEIGHT,S=this.DEFAULT_WIDTH/this.MAX_HEIGHT,y=1;if("SMOOTH"===l){const e=1.15,a=(e,t,s)=>(e-t)/(s-t);y=i/n<t/s?-a(r/_,m,c)/(1/(e-1))+e:-a(r/_,m,S)/(1/(e-1))+e,this.game.scale.resize(r*y,_*y),this.game.canvas.style.width=r*o+"px",this.game.canvas.style.height=_*o+"px",this.game.canvas.style.marginTop=(s-_*o)/2+"px",this.game.canvas.style.marginLeft=(t-r*o)/2+"px"}}}}},s={};function i(e){var n=s[e];if(void 0!==n)return n.exports;var a=s[e]={exports:{}};return t[e].call(a.exports,a,a.exports,i),a.exports}i.m=t,e=[],i.O=(t,s,n,a)=>{if(!s){var h=1/0;for(_=0;_<e.length;_++){for(var[s,n,a]=e[_],l=!0,o=0;o<s.length;o++)(!1&a||h>=a)&&Object.keys(i.O).every((e=>i.O[e](s[o])))?s.splice(o--,1):(l=!1,a<h&&(h=a));if(l){e.splice(_--,1);var r=n();void 0!==r&&(t=r)}}return t}a=a||0;for(var _=e.length;_>0&&e[_-1][2]>a;_--)e[_]=e[_-1];e[_]=[s,n,a]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={179:0};i.O.j=t=>0===e[t];var t=(t,s)=>{var n,a,[h,l,o]=s,r=0;if(h.some((t=>0!==e[t]))){for(n in l)i.o(l,n)&&(i.m[n]=l[n]);if(o)var _=o(i)}for(t&&t(s);r<h.length;r++)a=h[r],i.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return i.O(_)},s=self.webpackChunkavatar_ux_assignment=self.webpackChunkavatar_ux_assignment||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var n=i.O(void 0,[216],(()=>i(695)));n=i.O(n)})();